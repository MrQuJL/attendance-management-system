<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "com.qjl.attendance.mapper.NotesMapper"> 

	<!-- 查询满足条件的单据列表 -->
	<select id="listNotes" parameterType="notesQueryParam" resultType="notesDto">
		SELECT NOTEID noteid, FILLINTIME fillintime, A.EMPLOYEENAME employeename,
		TYPENAME notetypename, STARTDATE startdate, ENDDATE enddate,
		B.EMPLOYEENAME proxyname
		FROM ATT_EMPLOYEE A, ATT_EMPLOYEE B, ATT_ATTENDANCETYPE C, ATT_NOTES D
		WHERE D.EMPLOYEEID = A.EMPLOYEEID AND D.PROXYID = B.EMPLOYEEID AND
		D.NOTETYPEID = C.TYPEID
	</select>

	<!-- 添加一条请假单 -->
	<insert id="insertNotes" parameterType="notes">
		INSERT INTO ATT_NOTES(EMPLOYEEID, PROXYID, NOTETYPEID, FILLINTIME, CAUSE,
		STARTDATE, STARTTIME, ENDDATE, ENDTIME, DIRECTORSIGN, ADMINISTRATIONSIGN,
		PRESIDENTSIGN, OPERATORID)
		VALUES(#{employeeid}, #{proxyid}, #{notetypeid}, #{fillintime}, #{cause}, 
		#{startdate}, #{starttime}, #{enddate}, #{endtime}, #{directorsign}, #{administrationsign}, 
		#{presidentsign}, #{operatorid})
	</insert>

	<!-- 删除一条请假单 -->
	<delete id="deleteNotes" parameterType="long">
		DELETE FROM ATT_NOTES
		WHERE NOTEID = #{noteId}
	</delete>

</mapper>